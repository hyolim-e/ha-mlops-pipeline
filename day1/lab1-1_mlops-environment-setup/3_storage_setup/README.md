# Lab 1-1 Part 3: ìŠ¤í† ë¦¬ì§€ í™•ì¸

## ğŸ“‹ ê°œìš”

ì´ ì„¹ì…˜ì—ì„œëŠ” MLOps í”Œë«í¼ì˜ ìŠ¤í† ë¦¬ì§€ êµ¬ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤.

**ì†Œìš”ì‹œê°„:** 15ë¶„

---

## ğŸ¯ í™•ì¸ í•­ëª©

- **MinIO**: S3 í˜¸í™˜ ê°ì²´ ìŠ¤í† ë¦¬ì§€ (MLflow Artifacts)
- **PostgreSQL**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (MLflow Metadata)

---

## ğŸ—ï¸ ìŠ¤í† ë¦¬ì§€ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MLOps Platform                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Kubeflow      â”‚         â”‚     MLflow       â”‚     â”‚
â”‚  â”‚   Pipeline      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Tracking Server â”‚     â”‚
â”‚  â”‚                 â”‚         â”‚    (Port 5000)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚          â”‚                              â”‚              â”‚
â”‚          â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚          â”‚                    â”‚   PostgreSQL     â”‚    â”‚
â”‚          â”‚                    â”‚   (Metadata)     â”‚    â”‚
â”‚          â”‚                    â”‚    Port 5432     â”‚    â”‚
â”‚          â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚     MinIO      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â”‚  (Artifacts)   â”‚         (Artifact Store)          â”‚
â”‚  â”‚   Port 9000    â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ë‹¨ê³„ë³„ ì‹¤í–‰

### Step 1: ìë™ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
# ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./3_storage_setup/verify_storage.sh
```

**ì˜ˆìƒ ì¶œë ¥:**
```
============================================================
Lab 1-1 Part 3: ìŠ¤í† ë¦¬ì§€ í™•ì¸
============================================================

============================================================
Step 1: MinIO íŒŒë“œ ìƒíƒœ í™•ì¸
============================================================
âœ… MinIO íŒŒë“œ: minio-xxxxxxxxxx-xxxxx
NAME                     READY   STATUS    RESTARTS   AGE
minio-xxxxxxxxxx-xxxxx   1/1     Running   0          30d

============================================================
Step 2: MinIO ì„œë¹„ìŠ¤ í™•ì¸
============================================================
âœ… MinIO ì„œë¹„ìŠ¤ ì¡´ì¬
minio-service   ClusterIP   10.100.180.100   <none>   9000/TCP,9001/TCP   30d

============================================================
Step 3: PostgreSQL íŒŒë“œ ìƒíƒœ í™•ì¸
============================================================
âœ… PostgreSQL íŒŒë“œ: postgres-xxxxxxxxxx-xxxxx
NAME                        READY   STATUS    RESTARTS   AGE
postgres-xxxxxxxxxx-xxxxx   1/1     Running   0          30d

============================================================
Step 4: PostgreSQL ì„œë¹„ìŠ¤ í™•ì¸
============================================================
âœ… postgres-service ì¡´ì¬
postgres-service   ClusterIP   10.100.150.101   <none>   5432/TCP   30d

============================================================
Step 5: ìŠ¤í† ë¦¬ì§€ ì•„í‚¤í…ì²˜ ìš”ì•½
============================================================

ğŸ“Š ìŠ¤í† ë¦¬ì§€ êµ¬ì„±:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         MLOps Storage Architecture          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                             â”‚
  â”‚  MinIO (S3-Compatible Object Storage)       â”‚
  â”‚  â”œâ”€ Namespace: kubeflow                     â”‚
  â”‚  â”œâ”€ Port: 9000 (API), 9001 (Console)        â”‚
  â”‚  â””â”€ ìš©ë„: MLflow Artifacts, Pipeline Data   â”‚
  â”‚                                             â”‚
  â”‚  PostgreSQL (Relational Database)           â”‚
  â”‚  â”œâ”€ Namespace: mlflow-system                â”‚
  â”‚  â”œâ”€ Port: 5432                              â”‚
  â”‚  â””â”€ ìš©ë„: MLflow Metadata                   â”‚
  â”‚                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

============================================================
âœ… ìŠ¤í† ë¦¬ì§€ í™•ì¸ ì™„ë£Œ!
============================================================
```

### Step 2: MinIO Console ì ‘ì† (ì„ íƒì‚¬í•­)

```bash
# MinIO Console í¬íŠ¸ í¬ì›Œë”©
kubectl port-forward svc/minio-service -n kubeflow 9000:9000 9001:9001
```

**ë¸Œë¼ìš°ì € ì ‘ì†:**
```
http://localhost:9001
```

**ë¡œê·¸ì¸ ì •ë³´:**
- Username: `minio`
- Password: `minio123`

**MinIO Consoleì—ì„œ í™•ì¸:**
1. **Buckets**: MLflow artifact ë²„í‚· í™•ì¸
2. **Browse**: ì €ì¥ëœ íŒŒì¼ í™•ì¸
3. **Monitoring**: ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰ í™•ì¸

### Step 3: PostgreSQL ì—°ê²° í…ŒìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)

```bash
# PostgreSQL íŒŒë“œì— ì ‘ì†
kubectl exec -it deployment/postgres -n mlflow-system -- psql -U mlflow

# ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ í™•ì¸
\l

# í…Œì´ë¸” ëª©ë¡ í™•ì¸
\dt

# Experiments í…Œì´ë¸” í™•ì¸
SELECT * FROM experiments;

# ì¢…ë£Œ
\q
```

---

## ğŸ“Š ìŠ¤í† ë¦¬ì§€ ì—­í• 

### MinIO (S3-Compatible Object Storage)

**ìœ„ì¹˜:**
- Namespace: `kubeflow`
- í¬íŠ¸: 9000 (S3 API), 9001 (Console)

**ì €ì¥ ë‚´ìš©:**
- MLflow Artifacts (ëª¨ë¸ íŒŒì¼, ê·¸ë˜í”„, ë°ì´í„°)
- Kubeflow Pipeline Artifacts
- í•™ìŠµ ê²°ê³¼ë¬¼

**íŠ¹ì§•:**
- S3 API ì™„ì „ í˜¸í™˜
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì €ì¥ ìµœì í™”
- ë²„ì „ ê´€ë¦¬ ì§€ì›

### PostgreSQL (Relational Database)

**ìœ„ì¹˜:**
- Namespace: `mlflow-system`
- í¬íŠ¸: 5432

**ì €ì¥ ë‚´ìš©:**
- MLflow ë©”íƒ€ë°ì´í„°
  - Experiments ì •ë³´
  - Runs ì •ë³´
  - Parameters, Metrics, Tags
  - Model Registry ì •ë³´

**íŠ¹ì§•:**
- ACID íŠ¸ëœì­ì…˜ ë³´ì¥
- ê´€ê³„í˜• ë°ì´í„° ëª¨ë¸
- ê³ ì† ì¿¼ë¦¬ ì„±ëŠ¥

---

## ğŸ”— ë°ì´í„° íë¦„

```
1. í•™ìŠµ ì‹¤í–‰
   â””â”€â–¶ MLflow Tracking
       â”œâ”€â–¶ PostgreSQL: Parameters, Metrics ì €ì¥
       â””â”€â–¶ MinIO: Model íŒŒì¼, Artifacts ì €ì¥

2. ëª¨ë¸ ì¡°íšŒ
   â”œâ”€â–¶ PostgreSQL: ë©”íƒ€ë°ì´í„° ì¡°íšŒ
   â””â”€â–¶ MinIO: ëª¨ë¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ

3. íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
   â”œâ”€â–¶ MinIO: ì…ë ¥ ë°ì´í„° ì½ê¸°
   â””â”€â–¶ MinIO: ê²°ê³¼ ì €ì¥
```

---

## ğŸ’¡ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ: MinIO íŒŒë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**í™•ì¸:**
```bash
# ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ê²€ìƒ‰
kubectl get pods --all-namespaces | grep minio

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get pods -n kubeflow
```

### ë¬¸ì œ: PostgreSQL ì—°ê²° ì‹¤íŒ¨

**í™•ì¸:**
```bash
# íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs -l app=postgres -n mlflow-system --tail=50

# íŒŒë“œ ìƒì„¸ ì •ë³´
kubectl describe pod -l app=postgres -n mlflow-system
```

### ë¬¸ì œ: MinIO Console ì ‘ì† ë¶ˆê°€

**í™•ì¸:**
```bash
# í¬íŠ¸ í¬ì›Œë”© ìƒíƒœ
ps aux | grep "port-forward"

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
kubectl get svc -n kubeflow | grep minio

# í¬íŠ¸ í¬ì›Œë”© ì¬ì‹œì‘
pkill -f "port-forward.*minio"
kubectl port-forward svc/minio-service -n kubeflow 9000:9000 9001:9001
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] MinIO íŒŒë“œ Running ìƒíƒœ í™•ì¸
- [ ] MinIO ì„œë¹„ìŠ¤ í™•ì¸
- [ ] PostgreSQL íŒŒë“œ Running ìƒíƒœ í™•ì¸
- [ ] PostgreSQL ì„œë¹„ìŠ¤ í™•ì¸
- [ ] ìŠ¤í† ë¦¬ì§€ ì•„í‚¤í…ì²˜ ì´í•´
- [ ] (ì„ íƒ) MinIO Console ì ‘ì† í™•ì¸
- [ ] (ì„ íƒ) PostgreSQL ì—°ê²° í…ŒìŠ¤íŠ¸

---

## ğŸ¯ í•™ìŠµ ì„±ê³¼

ì´ ì„¹ì…˜ì„ ì™„ë£Œí•˜ë©´:

1. âœ… **MinIO ì•„í‚¤í…ì²˜** - S3 í˜¸í™˜ ê°ì²´ ìŠ¤í† ë¦¬ì§€
2. âœ… **PostgreSQL êµ¬ì„±** - ë©”íƒ€ë°ì´í„° ê´€ë¦¬
3. âœ… **ìŠ¤í† ë¦¬ì§€ ì—­í•  ë¶„ë‹´** - Artifacts vs Metadata
4. âœ… **ë°ì´í„° íë¦„** - í•™ìŠµ â†’ ì €ì¥ â†’ ì¡°íšŒ
5. âœ… **MLOps ì¸í”„ë¼** - ì „ì²´ ìŠ¤í† ë¦¬ì§€ ê³„ì¸µ ì´í•´

---

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

**Lab 1-2: Hello World Pipeline** - Kubeflow Pipelinesë¡œ ì²« ë²ˆì§¸ ML ì›Œí¬í”Œë¡œìš° ì‘ì„±

---

Â© 2025 í˜„ëŒ€ì˜¤í† ì—ë²„ MLOps Training
